{"version":3,"file":"Exp403.378460a2.1715140736669.js","sources":["../../src/pages/Exp403.vue"],"sourcesContent":["<template>\n  <div v-if=\"loading == 'true'\" class=\"loading flex items-center justify-center\">\n    <ReadingLoader />\n  </div>\n  <div v-else>\n    <div>403 Forbidden (no permission)</div>\n    <div>path: {{ path }}</div>\n    <div>\n      need permission: <a-tag color=\"blue\">{{ permission }}</a-tag>\n    </div>\n    <a-button @click=\"updatePermission\">更新权限</a-button>\n  </div>\n</template>\n<script lang=\"ts\" setup>\n  import ReadingLoader from '@/components/loaders/ReadingLoader.vue';\n  import { configPage, closePage } from 'stepin/es/tabs-view';\n  import { useRoute } from 'vue-router';\n  import { useLoadingStore, storeToRefs } from '@/store';\n  import { watch } from 'vue';\n  import { useAuthStore } from '@/plugins';\n\n  const props = defineProps({\n    loading: String,\n    permission: String,\n    path: String,\n  });\n  const route = useRoute();\n\n  const { authLoading } = storeToRefs(useLoadingStore());\n\n  const authStore = useAuthStore();\n  function updatePermission() {\n    authStore.setAuthorities(['edit1']);\n  }\n\n  if (props.loading) {\n    if (!authLoading.value) {\n      closePage(route, props.path);\n    } else {\n      watch(authLoading, () => {\n        closePage(route, props.path);\n      });\n    }\n  }\n  if (authLoading.value) {\n    configPage(route, { title: 'loading' });\n    configPage(route, { title: undefined });\n  }\n</script>\n<style scoped>\n  .loading {\n    min-height: calc(100vh - theme(height.header) - 182px);\n  }\n</style>\n"],"names":["props","__props","route","useRoute","authLoading","storeToRefs","useLoadingStore","authStore","useAuthStore","updatePermission","watch","closePage","configPage"],"mappings":"2eAqBE,MAAAA,EAAAC,EAKAC,EAAAC,IAEA,CAAA,YAAAC,CAAA,EAAAC,EAAAC,EAAA,CAAA,EAEAC,EAAAC,IACA,SAAAC,GAAA,CACEF,EAAA,eAAA,CAAA,OAAA,CAAA,CAAkC,CAGpC,OAAAP,EAAA,UACEI,EAAA,MAGEM,EAAAN,EAAA,IAAA,CACEO,EAAAT,EAAAF,EAAA,IAAA,CAA2B,CAAA,EAH7BW,EAAAT,EAAAF,EAAA,IAAA,GAOJI,EAAA,QACEQ,EAAAV,EAAA,CAAA,MAAA,SAAA,CAAA,EACAU,EAAAV,EAAA,CAAA,MAAA,MAAA,CAAA"}